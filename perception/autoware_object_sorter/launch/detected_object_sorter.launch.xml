<launch>
  <!-- Agnocast -->
  <arg name="agnocast_heaphook_path" default="/opt/ros/humble/lib/libagnocast_heaphook.so"/>

  <!-- Input -->
  <arg name="input/objects" default="~/input/objects"/>
  <!-- Output -->
  <arg name="output/objects" default="~/output/objects"/>
  <!-- Parameter -->
  <arg name="param_path" default="$(find-pkg-share autoware_object_sorter)/config/detected_object_sorter.param.yaml"/>

  <!-- Node -->
  <node pkg="autoware_object_sorter" exec="detected_object_sorter_node" name="detected_object_sorter" output="screen">
    <env name="LD_PRELOAD" value="$(var agnocast_heaphook_path):$(env LD_PRELOAD '')"/>
    <remap from="~/input/objects" to="$(var input/objects)"/>
    <remap from="~/output/objects" to="$(var output/objects)"/>
    <param from="$(var param_path)"/>
  </node>
</launch>
