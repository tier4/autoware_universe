<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="trajectory_optimizer_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/trajectory_optimizer.param.yaml"/>

  <arg name="trajectory_jerk_filtered_smoother_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/velocity_smoothing/JerkFiltered.param.yaml"/>
  <arg name="trajectory_velocity_smoother_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/velocity_smoothing/default_velocity_smoother.param.yaml"/>
  <arg name="common_trajectory_smoother_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/velocity_smoothing/default_common.param.yaml"/>

  <arg name="trajectory_elastic_band_smoother_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/trajectory_smoothing/elastic_band_smoother.param.yaml"/>

  <arg name="trajectory_point_fixer_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/plugins/trajectory_point_fixer.param.yaml"/>
  <arg name="trajectory_extender_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/plugins/trajectory_extender.param.yaml"/>
  <arg name="trajectory_spline_smoother_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/plugins/trajectory_spline_smoother.param.yaml"/>
  <arg name="trajectory_qp_smoother_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/plugins/trajectory_qp_smoother.param.yaml"/>
  <arg name="trajectory_velocity_optimizer_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/plugins/trajectory_velocity_optimizer.param.yaml"/>
  <arg name="trajectory_kinematic_feasibility_enforcer_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/plugins/trajectory_kinematic_feasibility_enforcer.param.yaml"/>
  <arg name="trajectory_mpt_optimizer_param_path" default="$(find-pkg-share autoware_trajectory_optimizer)/config/plugins/trajectory_mpt_optimizer.param.yaml"/>

  <arg name="output_traj" default="/planning/trajectory"/>
  <arg name="output_trajectories" default="/planning/generator/candidate_trajectories"/>
  <arg name="output_current_velocity_limit_mps" default="/planning/scenario_planning/current_max_velocity"/>
  <arg name="input_traj" default="/planning/diffusion_planner/trajectory"/>
  <arg name="input_trajectories" default="/planning/diffusion_planner/candidate_trajectories"/>
  <arg name="input_odometry" default="/localization/kinematic_state"/>
  <arg name="input_acceleration" default="/localization/acceleration"/>
  <arg name="input_external_velocity_limit_mps" default="/planning/scenario_planning/max_velocity"/>

  <node pkg="autoware_trajectory_optimizer" exec="autoware_trajectory_optimizer_node" name="trajectory_optimizer_node" output="screen">
    <param from="$(var trajectory_optimizer_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_jerk_filtered_smoother_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_velocity_smoother_param_path)" allow_substs="true"/>
    <param from="$(var common_trajectory_smoother_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_elastic_band_smoother_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_point_fixer_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_extender_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_spline_smoother_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_qp_smoother_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_velocity_optimizer_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_kinematic_feasibility_enforcer_param_path)" allow_substs="true"/>
    <param from="$(var trajectory_mpt_optimizer_param_path)" allow_substs="true"/>
    <remap from="~/output/trajectory" to="$(var output_traj)"/>
    <remap from="~/output/trajectories" to="$(var output_trajectories)"/>
    <remap from="~/output/current_velocity_limit_mps" to="$(var output_current_velocity_limit_mps)"/>
    <remap from="~/input/traj" to="$(var input_traj)"/>
    <remap from="~/input/trajectories" to="$(var input_trajectories)"/>
    <remap from="~/input/odometry" to="$(var input_odometry)"/>
    <remap from="~/input/acceleration" to="$(var input_acceleration)"/>
    <remap from="~/input/external_velocity_limit_mps" to="$(var input_external_velocity_limit_mps)"/>
  </node>
</launch>
