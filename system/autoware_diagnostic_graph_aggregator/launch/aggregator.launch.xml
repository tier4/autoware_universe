<launch>
  <arg name="converter_param_file" default="$(find-pkg-share autoware_diagnostic_graph_aggregator)/config/converter.param.yaml"/>
  <arg name="param_file" default="$(find-pkg-share autoware_diagnostic_graph_aggregator)/config/default.param.yaml"/>
  <arg name="graph_file"/>
  <arg name="~/struct" default="/diagnostics_graph/struct"/>
  <arg name="~/status" default="/diagnostics_graph/status"/>
  <arg name="~/unknowns" default="/diagnostics_graph/unknowns"/>
  <arg name="~/reset" default="/diagnostics_graph/reset"/>
  <arg name="~/availability" default="/system/command_mode/availability"/>

  <node_container pkg="agnocastlib" exec="agnocast_component_container_cie" name="aggregator_container" namespace="">
    <composable_node pkg="autoware_diagnostic_graph_aggregator" plugin="autoware::diagnostic_graph_aggregator::AggregatorNode" name="aggregator_node" namespace="">
      <param from="$(var param_file)"/>
      <param name="graph_file" value="$(var graph_file)"/>
      <remap from="~/struct" to="$(var ~/struct)"/>
      <remap from="~/status" to="$(var ~/status)"/>
      <remap from="~/unknowns" to="$(var ~/unknowns)"/>
      <remap from="~/reset" to="$(var ~/reset)"/>
      <remap from="~/availability" to="$(var ~/availability)"/>
    </composable_node>
    <composable_node pkg="autoware_diagnostic_graph_aggregator" plugin="autoware::diagnostic_graph_aggregator::ConverterNode" name="converter_node" namespace="">
      <param from="$(var converter_param_file)"/>
      <remap from="~/command_mode/availability" to="/system/command_mode/availability"/>
      <remap from="~/operation_mode/availability" to="/system/operation_mode/availability"/>
    </composable_node>
    <composable_node pkg="autoware_glog_component" plugin="autoware::glog_component::GlogComponent" name="glog_component_aggregator" namespace=""/>
  </node_container>
</launch>
