# livox_tag_filter

## 目的

`livox_tag_filter`は、次のタグを使用して点群からノイズを除去するノードです。

- 空間位置に基づいた点の特性
- 強度に基づいた点の特性
- リターン番号

## 内部動作 / アルゴリズム

## 入出力

### 入力

| Name      | Type                            | Description          |
| --------- | ------------------------------- | -------------------- |
| `~/input` | `sensor_msgs::msg::PointCloud2` | リファレンスポイント |

### 出力

### Localizerについて

このドキュメントでは、AutowareのLocalizerの機能と実装について説明します。Localizerモジュールは、SLAMの結果を出力として受け取り、自車位置と自身の周囲地図を推定します。

#### 機能

Localizerの主な機能は次のとおりです。

- Lidar、カメラ、IMUセンサーデータの統合
- 移動・静止物体の検出
- オドメトリとSLAMによる自車位置の推定
- 車線および障害物の周囲地図の抽出

#### 実装

Localizerモジュールは、次のコンポーネントで構成されています。

- **Sensor Preprocessor：**センサーデータの前処理とフィルタリングを行います。
- **Odometry：**オドメトリ情報とIMUデータを使用して、自車位置を推定します。
- **SLAM：**Lidarデータを使用して、周囲環境の地図と自車位置を推定します。
- **Moving Object Detector：**Lidarデータを使用して、移動物体を検出します。
- **Lane Extractor：**Lidarデータを使用して、車線を抽出します。
- **Obstacle Extractor：**Lidarデータを使用して、障害物を抽出します。

#### 入出力インターフェース

Localizerモジュールは、次のインターフェースで入出力を処理します。

**入力：**

- Lidarデータ
- カメラデータ（オプション）
- IMUデータ
- GPSデータ（オプション）

**出力：**

- 自車位置推定値
- 自身周囲地図
- 移動物体リスト
- 車線リスト
- 障害物リスト

#### パラメーター

Localizerモジュールの動作を制御するには、次のパラメーターを使用します。

- `post resampling`：SLAMの再標本化後に自車位置を更新するかどうかを決定します。
- `use imu`：自車位置推定にIMUデータを使用するかどうかを決定します。
- `vel_range_violation`：速度逸脱量のしきい値です。
- `acc_range_violation`：加速度逸脱量のしきい値です。

| 名前       | 型                              | 説明             |
| ---------- | ------------------------------- | ---------------- |
| `~/output` | `sensor_msgs::msg::PointCloud2` | フィルタされた点 |

## パラメータ

### ノードパラメータ

| 名前          | タイプ          | 説明                            |
| ------------- | --------------- | ------------------------------- |
| `ignore_tags` | vector<int64_t> | 除外されたタグ (以下の表を参照) |

### タグパラメータ

| ビット | 空間的位置に基づく点の特性 | オプション |
| ------ | -------------------------- | ---------- |
| 0~1    | ノーマル                   |            |
|        | ノイズの信頼度が高い       |            |
|        | ノイズの信頼度が中程度     |            |
|        | ノイズの信頼度が低い       |            |
| 2~3    | 強度の点の特性             | ノーマル   |
|        | ノイズの信頼度が高い       |            |
|        | ノイズの信頼度が中程度     |            |
|        | 予約                       |            |
| 4~5    | 戻り値                     | 0を返す    |
|        | 1を返す                    |            |
|        | 2を返す                    |            |
|        | 3を返す                    |            |
| 6~7    | 予約                       |            |

## 想定 / 既知の制限事項

## (任意) エラー検出および処理

## (任意) パフォーマンス特性評価

## (任意) 参照 / 外部リンク

[1] <https://www.livoxtech.com/downloads>

## (任意) 将来の拡張 / 未実装部分
