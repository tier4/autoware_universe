{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Parameters for vehicle cmd gate",
  "type": "object",
  "definitions": {
    "vehicle_cmd_gate": {
      "type": "object",
      "properties": {
        "update_rate": {
          "type": "number",
          "default": 10.0,
          "description": "To update period"
        },
        "use_emergency_handling": {
          "type": "boolean",
          "default": "false",
          "description": "true when emergency handler is used."
        },
        "use_external_emergency_stop": {
          "type": "boolean",
          "default": "false",
          "description": "true when external emergency stop information is used."
        },
        "system_emergency_heartbeat_timeout": {
          "type": "number",
          "default": 0.5,
          "description": "timeout for system emergency."
        },
        "external_emergency_stop_heartbeat_timeout": {
          "type": "number",
          "default": 0.5,
          "description": "timeout for external emergency."
        },
        "stop_hold_acceleration": {
          "type": "number",
          "default": -1.5,
          "description": "longitudinal acceleration cmd when vehicle should stop"
        },
        "emergency_acceleration": {
          "type": "number",
          "default": -2.4,
          "description": "longitudinal acceleration cmd when vehicle stop with emergency."
        },
        "nominal.vel_lim": {
          "type": "number",
          "default": 25.0,
          "description": "limit of longitudinal velocity (activated in AUTONOMOUS operation mode)."
        },
        "nominal.reference_speed_points": {
          "type": "array",
          "items": { "type": "number" },
          "default": [0.1, 0.3, 20.0, 30.0],
          "description": "velocity point used as a reference when calculate control command limit (activated in AUTONOMOUS operation mode)."
        },
        "nominal.steer_lim": {
          "type": "array",
          "items": { "type": "number" },
          "default": [1.0, 1.0, 1.0, 0.8],
          "description": "array of limits for steering angle (activated in AUTONOMOUS operation mode)."
        },
        "nominal.vel_diff_lim_from_lon_acc": {
          "type": "array",
          "items": { "type": "number" },
          "default": [5.0, 5.0, 5.0, 4.0],
          "description": "array of limits for velocity difference from longitudinal acceleration (activated in AUTONOMOUS operation mode)."
        },
        "nominal.acc_diff_lim_from_lon_jerk": {
          "type": "array",
          "items": { "type": "number" },
          "default": [80.0, 5.0, 5.0, 4.0],
          "description": "array of limits for acceleration difference from longitudinal jerk (activated in AUTONOMOUS operation mode)."
        },
        "nominal.steer_lim_from_lat_acc": {
          "type": "array",
          "items": { "type": "number" },
          "default": [5.0, 5.0, 5.0, 4.0],
          "description": "array of limits for steering angle from lateral acceleration (activated in AUTONOMOUS operation mode)."
        },
        "nominal.steer_lim_from_lat_jerk": {
          "type": "array",
          "items": { "type": "number" },
          "default": [7.0, 7.0, 7.0, 6.0],
          "description": "array of limits for steering angle from lateral jerk (activated in AUTONOMOUS operation mode)."
        },
        "nominal.cmd_steer_rate_lim": {
          "type": "array",
          "items": { "type": "number" },
          "default": [1.0, 1.0, 1.0, 0.8],
          "description": "array of limits for command steering rate (activated in AUTONOMOUS operation mode)."
        },
        "nominal.actual_steer_diff_lim": {
          "type": "array",
          "items": { "type": "number" },
          "default": [1.0, 1.0, 1.0, 0.8],
          "description": "array of limits for difference between actual and command steering angle (activated in AUTONOMOUS operation mode)."
        },
        "on_transition.vel_lim": {
          "type": "number",
          "default": 50.0,
          "description": "limit of longitudinal velocity (activated in TRANSITION operation mode)."
        },
        "on_transition.reference_speed_points": {
          "type": "array",
          "items": { "type": "number" },
          "default": [20.0, 30.0],
          "description": "velocity point used as a reference when calculate control command limit (activated in TRANSITION operation mode)."
        },
        "on_transition.steer_lim": {
          "type": "array",
          "items": { "type": "number" },
          "default": [1.0, 0.8],
          "description": "array of limits for steering angle (activated in TRANSITION operation mode)."
        },
        "on_transition.vel_diff_lim_from_lon_acc": {
          "type": "array",
          "items": { "type": "number" },
          "default": [1.0, 0.9],
          "description": "array of limits for velocity difference from longitudinal acceleration (activated in TRANSITION operation mode)."
        },
        "on_transition.acc_diff_lim_from_lon_jerk": {
          "type": "array",
          "items": { "type": "number" },
          "default": [0.5, 0.4],
          "description": "array of limits for acceleration difference from longitudinal jerk (activated in TRANSITION operation mode)."
        },
        "on_transition.steer_lim_from_lat_acc": {
          "type": "array",
          "items": { "type": "number" },
          "default": [2.0, 1.8],
          "description": "array of limits for steering angle from lateral acceleration (activated in TRANSITION operation mode)."
        },
        "on_transition.steer_lim_from_lat_jerk": {
          "type": "array",
          "items": { "type": "number" },
          "default": [7.0, 6.0],
          "description": "array of limits for steering angle from lateral jerk (activated in TRANSITION operation mode)."
        },
        "on_transition.cmd_steer_rate_lim": {
          "type": "array",
          "items": { "type": "number" },
          "default": [1.0, 0.8],
          "description": "array of limits for command steering rate (activated in TRANSITION operation mode)."
        },
        "on_transition.actual_steer_diff_lim": {
          "type": "array",
          "items": { "type": "number" },
          "default": [1.0, 0.8],
          "description": "array of limits for difference between actual and command steering angle (activated in TRANSITION operation mode)."
        }
      },
      "required": [
        "update_rate",
        "use_emergency_handling",
        "use_external_emergency_stop",
        "system_emergency_heartbeat_timeout",
        "external_emergency_stop_heartbeat_timeout",
        "stop_hold_acceleration",
        "emergency_acceleration",
        "nominal.vel_lim",
        "nominal.reference_speed_points",
        "nominal.steer_lim",
        "nominal.vel_diff_lim_from_lon_acc",
        "nominal.acc_diff_lim_from_lon_jerk",
        "nominal.steer_lim_from_lat_acc",
        "nominal.steer_lim_from_lat_jerk",
        "nominal.cmd_steer_rate_lim",
        "nominal.actual_steer_diff_lim",
        "on_transition.vel_lim",
        "on_transition.reference_speed_points",
        "on_transition.steer_lim",
        "on_transition.vel_diff_lim_from_lon_acc",
        "on_transition.acc_diff_lim_from_lon_jerk",
        "on_transition.steer_lim_from_lat_acc",
        "on_transition.steer_lim_from_lat_jerk",
        "on_transition.cmd_steer_rate_lim",
        "on_transition.actual_steer_diff_lim"
      ]
    }
  },
  "properties": {
    "/**": {
      "type": "object",
      "properties": {
        "ros__parameters": {
          "$ref": "#/definitions/vehicle_cmd_gate"
        }
      },
      "required": ["ros__parameters"]
    }
  },
  "required": ["/**"]
}
